<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scenario - CPR Training</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        /* Scenario Page Specific Styles */
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .scenario-container {
            max-width: 1200px;
            width: 95%;
            background: var(--bg-card);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin: 2rem auto;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(219, 39, 119, 0.3);
            text-align: center;
        }

        .scenario-header {
            margin-bottom: var(--spacing-lg);
        }

        .scenario-header h1 {
            font-size: 2.5rem;
            margin-bottom: var(--spacing-sm);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .scenario-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            padding: var(--spacing-md);
            background: rgba(219, 39, 119, 0.05);
            border-radius: var(--radius-md);
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .info-label {
            font-size: 0.875rem;
            color: var(--text-muted);
            font-weight: 600;
        }

        .info-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .video-wrapper {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto var(--spacing-lg);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            background: #000;
        }

        .video-wrapper video {
            width: 100%;
            height: auto;
            display: block;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: var(--spacing-md);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .video-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .play-button {
            width: 100px;
            height: 100px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: pulse 2s ease-in-out infinite;
        }

        .play-button:hover {
            transform: scale(1.1);
        }

        .play-button svg {
            width: 50px;
            height: 50px;
            fill: white;
            margin-left: 8px;
        }

        .countdown-display {
            font-size: 5rem;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 20px rgba(219, 39, 119, 0.8);
            animation: countdownPulse 1s ease-in-out;
        }

        @keyframes countdownPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        .status-message {
            font-size: 1.5rem;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: var(--spacing-md);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(219, 39, 119, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-top: var(--spacing-md);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Guidelines Section */
        .guidelines-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            border: 2px solid rgba(219, 39, 119, 0.2);
        }

        .guidelines-section h2 {
            color: var(--primary-color);
            font-size: 1.75rem;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
        }

        .guidelines-content {
            text-align: left;
        }

        .guideline-step {
            display: flex;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            background: rgba(219, 39, 119, 0.03);
            border-left: 4px solid var(--primary-color);
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
        }

        .guideline-step:hover {
            background: rgba(219, 39, 119, 0.08);
            transform: translateX(5px);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .step-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.1) 0%, rgba(251, 146, 60, 0.05) 100%);
            border: 2px solid #fb923c;
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-top: var(--spacing-md);
            display: flex;
            gap: var(--spacing-sm);
            align-items: flex-start;
        }

        .warning-box svg {
            color: #fb923c;
            flex-shrink: 0;
        }

        .warning-text {
            color: var(--text-primary);
            font-weight: 600;
        }

        .btn-continue {
            width: 100%;
            padding: 1.25rem 2rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.25rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-lg);
            box-shadow: var(--shadow-md);
        }

        .btn-continue:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .action-buttons {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin-top: var(--spacing-lg);
        }

        .btn-skip {
            padding: 1rem 2rem;
            background: rgba(219, 39, 119, 0.1);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-skip:hover {
            background: var(--primary-color);
            color: white;
        }
    </style>
</head>

<body>
    <div class="scenario-container">
        <!-- Header -->
        <div class="scenario-header">
            <h1>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å CPR</h1>
            <p class="status-message" id="statusMessage">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå</p>
        </div>

        <!-- Scenario Info -->
        <div class="scenario-info">
            <div class="info-item">
                <span class="info-label">‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span>
                <span class="info-value" id="studentName">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå</span>
                <span class="info-value" id="scenario">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</span>
                <span class="info-value" id="difficulty">-</span>
            </div>
        </div>

        <!-- Assessment Guidelines -->
        <div class="guidelines-section" id="guidelinesSection">
            <h2>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="vertical-align: middle; margin-right: 8px;">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4M12 8h.01"></path>
                </svg>
                ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå
            </h2>
            <div class="guidelines-content" id="guidelinesContent">
                <!-- Content will be populated by JavaScript -->
            </div>
            <button class="btn-continue" onclick="showVideo()">
                ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
            </button>
        </div>

        <!-- Video Player -->
        <div class="video-wrapper" id="videoWrapper" style="display: none;">
            <video id="scenarioVideo" preload="auto">
                <source src="" type="video/mp4">
                ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
            </video>

            <div class="video-overlay active" id="videoOverlay">
                <div class="play-button" onclick="playVideo()">
                    <svg viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn-skip" onclick="skipToTraining()">
                ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å CPR
            </button>
        </div>
    </div>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const studentName = urlParams.get('name') || '‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
        const scenario = urlParams.get('scenario') || '‡∏à‡∏°‡∏ô‡πâ‡∏≥';
        const difficulty = urlParams.get('difficulty') || 'beginner';

        // Display info
        document.getElementById('studentName').textContent = studentName;
        document.getElementById('scenario').textContent = scenario;
        document.getElementById('difficulty').textContent =
            difficulty === 'beginner' ? '2 ‡∏ô‡∏≤‡∏ó‡∏µ' : '4 ‡∏ô‡∏≤‡∏ó‡∏µ';

        // Video setup
        const video = document.getElementById('scenarioVideo');
        const overlay = document.getElementById('videoOverlay');
        const progressBar = document.getElementById('progressBar');
        const statusMessage = document.getElementById('statusMessage');

        // Guidelines data for each scenario
        const guidelines = {
            '‡∏à‡∏°‡∏ô‡πâ‡∏≥': {
                steps: [
                    {
                        title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢',
                        description: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'
                    },
                    {
                        title: '‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥',
                        description: '‡πÉ‡∏ä‡πâ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (‡∏ó‡∏∏‡πà‡∏ô, ‡πÑ‡∏°‡πâ) ‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏ß‡∏≤‡∏á‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏Ç‡πá‡∏á'
                    },
                    {
                        title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á',
                        description: '‡πÄ‡∏Ñ‡∏≤‡∏∞‡πÑ‡∏´‡∏•‡πà‡πÅ‡∏•‡∏∞‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏´‡∏°?" ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà'
                    },
                    {
                        title: '‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à',
                        description: '‡πÄ‡∏á‡∏¢‡∏´‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡∏¢‡∏Å‡∏Ñ‡∏≤‡∏á ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à (‡∏°‡∏≠‡∏á-‡∏ü‡∏±‡∏á-‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å) ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ'
                    },
                    {
                        title: '‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠',
                        description: '‡∏ï‡∏∞‡πÇ‡∏Å‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á ‡πÇ‡∏ó‡∏£ 1669 ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏ó‡∏£‡πÅ‡∏ó‡∏ô ‡∏Ç‡∏≠ AED ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ'
                    },
                    {
                        title: '‡πÄ‡∏£‡∏¥‡πà‡∏° CPR ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ',
                        description: '‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ 30 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏õ‡πà‡∏≤‡∏õ‡∏≤‡∏Å 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á'
                    }
                ],
                warning: '‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ú‡∏π‡πâ‡∏à‡∏°‡∏ô‡πâ‡∏≥‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏õ‡∏≠‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏° CPR ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏Å‡∏ä‡πâ‡∏≤ ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏≠‡∏≤‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏õ‡∏≠‡∏î'
            },
            '‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥': {
                steps: [
                    {
                        title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢',
                        description: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏£‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á'
                    },
                    {
                        title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á',
                        description: '‡πÄ‡∏Ñ‡∏≤‡∏∞‡πÑ‡∏´‡∏•‡πà‡πÅ‡∏£‡∏á‡πÜ ‡πÅ‡∏•‡∏∞‡∏ñ‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏ß‡πà‡∏≤ "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏´‡∏°?" ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà'
                    },
                    {
                        title: '‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠',
                        description: '‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ‡∏ï‡∏∞‡πÇ‡∏Å‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÇ‡∏ó‡∏£ 1669 ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏ó‡∏£‡πÅ‡∏ó‡∏ô'
                    },
                    {
                        title: '‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à',
                        description: '‡πÄ‡∏á‡∏¢‡∏´‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡∏¢‡∏Å‡∏Ñ‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à (‡∏°‡∏≠‡∏á-‡∏ü‡∏±‡∏á-‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å)'
                    },
                    {
                        title: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à',
                        description: '‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏´‡∏≠‡∏ö/‡∏™‡∏∞‡∏î‡∏∏‡∏î)'
                    },
                    {
                        title: '‡πÄ‡∏£‡∏¥‡πà‡∏° CPR ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ',
                        description: '‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ 30 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏õ‡πà‡∏≤‡∏õ‡∏≤‡∏Å 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á'
                    }
                ],
                warning: '‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏≠‡∏¢‡πà‡∏≤‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÉ‡∏à ‡∏ñ‡πâ‡∏≤‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏° CPR ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ'
            }
        };

        // Populate guidelines
        function populateGuidelines() {
            const guideData = guidelines[scenario] || guidelines['‡∏à‡∏°‡∏ô‡πâ‡∏≥'];
            const content = document.getElementById('guidelinesContent');

            let html = '<div class="guidelines-steps">';

            guideData.steps.forEach((step, index) => {
                html += `
                    <div class="guideline-step">
                        <div class="step-number">${index + 1}</div>
                        <div class="step-content">
                            <div class="step-title">${step.title}</div>
                            <div class="step-description">${step.description}</div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';

            html += `
                <div class="warning-box">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                    <div class="warning-text">${guideData.warning}</div>
                </div>
            `;

            content.innerHTML = html;
        }

        // Show video section
        function showVideo() {
            document.getElementById('guidelinesSection').style.display = 'none';
            document.getElementById('videoWrapper').style.display = 'block';
            statusMessage.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå';
        }

        // Initialize guidelines on load
        populateGuidelines();

        // Set video source based on scenario
        const videoSources = {
            '‡∏à‡∏°‡∏ô‡πâ‡∏≥': 'assets/drowning.mp4',
            '‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥': 'assets/unconscious.mp4'
        };

        // Set video source (will need actual video files)
        video.src = videoSources[scenario] || videoSources['‡∏à‡∏°‡∏ô‡πâ‡∏≥'];

        // Play video function
        function playVideo() {
            video.play();
            overlay.classList.remove('active');
            statusMessage.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå...';
        }

        // Update progress bar
        video.addEventListener('timeupdate', () => {
            const progress = (video.currentTime / video.duration) * 100;
            progressBar.style.width = progress + '%';
        });

        // When video ends, show countdown
        video.addEventListener('ended', () => {
            startCountdown();
        });

        // Countdown before training
        function startCountdown() {
            statusMessage.textContent = '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å CPR...';
            let count = 3;

            overlay.classList.add('active');
            overlay.innerHTML = `<div class="countdown-display">${count}</div>`;

            const countdownInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    overlay.querySelector('.countdown-display').textContent = count;
                    // Re-trigger animation
                    const countdownEl = overlay.querySelector('.countdown-display');
                    countdownEl.style.animation = 'none';
                    setTimeout(() => {
                        countdownEl.style.animation = 'countdownPulse 1s ease-in-out';
                    }, 10);
                } else {
                    clearInterval(countdownInterval);
                    startTraining();
                }
            }, 1000);
        }

        // Start training
        function startTraining() {
            // In production, this would navigate to the actual training page
            // and connect to ESP32 for real-time monitoring
            overlay.innerHTML = `<div class="countdown-display">START!</div>`;
            setTimeout(() => {
                alert(`üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å CPR!\n\n‡∏ä‡∏∑‡πà‡∏≠: ${studentName}\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå: ${scenario}\n‡∏£‡∏∞‡∏î‡∏±‡∏ö: ${difficulty}\n\n(‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö ESP32 ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Real-time)`);
                // Redirect to training page
                window.location.href = `training.html?name=${encodeURIComponent(studentName)}&scenario=${encodeURIComponent(scenario)}&difficulty=${difficulty}`;
            }, 1500);
        }

        // Skip to training
        function skipToTraining() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å CPR ‡πÄ‡∏•‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                window.location.href = `training.html?name=${encodeURIComponent(studentName)}&scenario=${encodeURIComponent(scenario)}&difficulty=${difficulty}`;
            }
        }

        // Handle video errors
        video.addEventListener('error', () => {
            console.error('Video failed to load');
            statusMessage.textContent = '‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å';
            overlay.innerHTML = `
                <div style="color: white; text-align: center;">
                    <p style="font-size: 1.5rem; margin-bottom: 1rem;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</p>
                    <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏ô assets/</p>
                </div>
            `;
        });
    </script>
</body>

</html>